                                      粒子群与种群的多样性
摘要：
动态优化的最好优化由于多样性的缺失，可能是进化算法的一个难题。然而，另一种以种群为基础的搜索技术（粒子群优化）很好地适应了这个问题。如果，一些或者全部粒子带电，那么一个扩展的种群能够保持并且动态优化可能用一个简单算法来实现。带电粒子群是基于静电学的模拟（粒子间的斥力使得带电粒子围绕在中子为核心的周围）。本论文提出了一种多样性的方法并测试带电粒子和中子群的开发时间。这些结果便于预测优化跟踪一定数量的活力的给定知识。大量的实验测试这些预测，证明了带电粒子群在简单动态环境的效力。
一、前言
粒子群优化算法（PSO）是一种以群体为基础的优化技术，是Kennedy and Eberhart 在1995年受到群体行为的启发而提出的。虽然PSO与进化算法有一些共同之处，但是与通过包含一些溶解质（或者粒子）的速度的方法不同。一种新具有潜力的解决方案是通过添加粒子位置上的速度。粒子在粒子群中通过两个加速度来相互作用。这些加速度像春天似的：每一个粒子都受到先前粒子的最好位置和种群全局最好位置的影响。在这里"最好"是由目标函数在那些位置上的计算值来定义的。这些种群在一些各种静态语境的基准函数中搜索全局最优的能力，由Eberhart and Shi在2001年证明是相当成功的。
    进化技术已经被应用到动态问题的研究中去了（Branke 2001, 2003）。这些粒子群优化算法的应用是一个全新的领域，结果也将会鼓励环境的严重的低空间(Eberhart and Shi 2001; Carlisle and Dozier 2000)。进化与粒子群最优算法，在动态环境中能够承受过度专业化。一般，他们要求进一步完善以便于能够检测到变化并进行回应。一些粒子群最优算法的可能的改编都已经研究了（Hu and Eberhart 2002），但是这些改编仍然不完善。另外一种不同的PSO的拓展已经由Blackwell and Bentley提出了 (Blackwell and Bentley 2002)，这种算法解决了对于改变的检测和反应。在带电的PSO（CPSO）中，一些或者全部的粒子模拟静电学都带种电荷。通过合并带电粒子间的静电斥力，第三种冲撞避免加速度加入了粒子动态系统。这种静电斥力保持了种群的多样性，使得种群自动对变化进行检测并反应。特别是在几种空间恶劣环境中十分有效(Blackwell and Bentley 2002)。全部带电种群和一半带电种群与改编了的PSO在包括了高维空间和时间的动态环境中随机搜索进行了比较。
    对于粒子群的形为的理解处，大部分认为是经验性的，但是Clerc and Kennedy的论文中通过一个简单模型的收敛性证明提出 了理论性的说明(Clerc and Kennedy 2002)。这种简单的一维模型没有粒子间的相互作用，因此没做优化任何东西。为了达到优化的目的，粒子间的相互作用需要加入进来以便于粒子找到（例如可能解）的好位置的信息能够相互交流。
    本文拓展了Clerc and Kennedy的工作，新增了粒子间的相互作用。在这里建议把粒子在种群中的位置的分离应该是一种适于多样方法。对于中性粒子（例如不带电的粒子）群，|S|的收缩频率能够与最好位置的改变进行比较。
   在这里也建议设置一个带电种群的多样性的极限|S+|。在粒子群中静电斥力与最好位置的引导将保持带电粒子群的多样性在一个固定的水平，如果他们在|S+|领域，规模优化的跳步可能随时跟踪。
   在下一节，我们将说明带电粒子群优化算法（CPSO）的定义和Clerc and Kennedy的证明的背景。第三节，我们将定义|S|并估计Clerc and Kennedy简单模型和包含粒子相互作用和随机弹性。还包括一些带电粒子群多样性的定性预测和上下界也将会在这一节讲述。在第四节我们将会通过实验来描述PSO和CPSO的多样性以及在动态环境中的表现。论文结束部分将会讨论理论和实验结果。
二、粒子群算法以及收敛性。
2.1
    i = 1,...,N 粒子群是一个位置xi和速度vi的集合， S={xi, vi} 其中每一向量xi和vi都有 j=1,...,d维。本文，d维向量都是用小写粗体（例如a）与规范（欧几里德）|a| = a，Xij和Vij分别表示Xi和Vi的第j元素。粒子更新包括更新粒子的速度，以一个加速加速到目前的速度，以此更新的速度到当前位置。加速是一个简单的春天般的吸引力，一个吸引Pi（弹簧常数U1），这可能会因每个不同粒子而不同，吸引力PG（弹簧常数U2）是在一领域中最好的粒子（指数G）（这也可能是整个群）。粒子通过修改吸引因子Pi而想到作用。这种修改可以说成是群体智慧的本质，是来自目标函数F在Xi处的评价，在表1中被标记为吸引更新。
    CPSO算法在表1 中已经给出。位置和速度在搜索空间[-X/2, X/2]d 内初始化了，X为变量在每一维的动态范围。一个简单的迭代变量（与变量t相同值）在粒子群中组成一个完整的传递，从而更新位置，速度和吸引因子。 
   在粒子更新中，a是一个约束因子是用来保证收敛的，b1,2是随机从[0,1]区间统一制定的，有效地在每一次迭代中在[0,c1,2]区间内产生弹簧常数。表1中也表示了附加的排斥加速度（；；；；）， 这里
{
}
i,k都是粒子索引。因此PSO算法是ＣＰＳＯ的一个特例，也就是粒子不带电。
　逃避仅仅在带电荷Q粒子对之间。与壳rc＜ r ＜ rp上的库仑类似。在距离不到核半径ｒｃ，排斥力固定在核半径值大小，这里没有分离，避免超越每个粒子的认知限制。核半径是用来在小距离上阻止斥力和阻止能让带电粒子超出搜索范围的超大加速度的。注意粒子斥力Ai是在更新每一维Xi之前确定的。这是因为，不像弹力定律在加速度中的应用那样，库仑定律是依据欧几里得距离｜Xi－Ｘｋ｜不是在每一维的距离｜xij －xkj｜，因此不能由表１中的ｊ控制的循环内完成的。

２.２简单模型的收敛
　　Clerc and Kennedy的收敛证明是简单一维模型的，没有粒子间的相互作用但是有一个固定的弹性数Clerc and Kennedy 2002).
{
}
    该算法在表2 中表述了。
    因为在这个模型中没有相互作用，所以通过考虑固定吸引因子p和固定弹性常量h的一维动态系统来分析这种模型中的动态。
   {
}
速度收缩替代了速度夹紧在原PSO中的位置，通过按比例因子a<1来缩小v(t+1)：
{
}
为了简洁，Clerc and Kennedy从写了这个式子：
{
}
还有矩阵形式
P（t+1）=MP(t)
y(t)=p-x(t),P(t)=[v(t),y(t)]T，M是一个2X2的转换矩阵，定义如下：
{
}
M由类似转换矩阵A对角化了：
{
}
X和O的收敛条件通过矩阵P增长为|MtP（0）|=|LtAP（0）|，其中|.|是欧几里得范数形式。Clerc and ennedy
说明了特征值e1,2是复杂的，b>4的模数X.，其中X由
{
}
给出。
如果由Eq.8确定一个给定弹性常量o的收缩因子，那么就会将达到收敛。
三，粒子群多样性
3.1 简单模型
   上文的结果可以用来估计N个不相互作用的粒子（标记为i=1...........N）的S群在j=1.....d维的空间里移动的最大部分分离程度。S群的多样性在迭代t中将写成非规范形式|S|，并由J维位置最大距离来定义：
{}
 现在引入一组固定吸引因子{pi},所有粒子拥有一个因子，然后每一个粒子Xij受简单模型的影响并且收敛带来yij=pij-xij―>0.
    在本文中，在Y处的一点认为在{xi}点集里，前提是Yj满足下式{}
并且{yi}集合在{xi}里，如果（Eq.10）对于每一个粒子成立的话。
    粒子i的距离，位置j,以及吸引因子Pi提供了一个估计方法|S|:|S|~max().
    如果{pi}在种群内，而且吸引因子紧紧地成束那么（Eq。11）能很好地估计|s|.一种典型的紧紧成束的结构在FIg.1中已经给出了。如果，心尽管{pi}不在种群内部，max{}将会高估|s|。这将是其中不寻常的结构情况蜂群正在{PI}集体振荡（图2）
    在这种没有相互作用的简单模型里，每一|Yij|都收敛于0.|s|=constX{ }.
    这也可以写成一个比例法
{
}
3.2 相互作用粒子群
 在PSO中，粒子之间的相互作用会导致吸引因子的更新，在3.1部分的分析也没有应用。{}
实际上，每一粒子Xij都满足Eq.2定义的简单形式：{}
用{}替代{}。这时考虑固定弹性系数，{}（PSO）粒子间的相互作用意味着{}随共享信息和Eq.2中没有分析来改变。为了考虑共享信息，我们考虑粒子i在每t次迭代中；pi和/或pg可能由于吸引因子i...N在t-1次迭代中和吸引因子1....i-1在t次迭代中的更新而改变了，所以{}变化量如下{}并且{}。这种变化可以由保持{Pi}固定和转换坐标{}或者在矩阵形式中pi(t)通过乘{}{}来实现。粒子因此用{pi(t+1)=m}表示。今后定义{}。在一个标准目标函数f中难确定一个{}的界线，因为粒子无规则地运动和目标函数的临界点周围的混乱。例如，一个粒子可以很接近{}，因为{}的极限{}可能变得十分大。为了继续，因此我们做两个假设：
1、球对称：假设在t0次迭代中种群的结构和吸引因子与图1 类似。目标函数的最优值xa在一个球对称的领域里(Da)，在这个领域里在随后有迭代里种群没有跳出，xa是唯一的驻点。球对称就意味着pi将会只更新为一个粒子的位置（{}如果{}）。换句话说任何更新都会使得吸引因子群向xa收缩，然后种群便向吸引因子收敛。
2、尺寸不变性：在这个假设中，吸引因子和种群收缩都是以同样的速率进行的，这样一来标度律就与Eq.13类似。为了推动这一假设，问题是没有任何外部尺度的特点（注意，附近的球对称最优）。这是因为吸引因子的更新仅仅是依靠找到一个接近于xa;目标函数在Da里不是很重要。如果种群和吸引因子都收缩，那么这可能意味着无穷小量{}与时间无关。换句话说，当平均值大于初始化结构{}，{}就是与时间（空间）无关的。{}。
   总的来说，收敛可能在局部球对称环境里服从标度律，{}因此|s|减小为{}其中{}是一个正常数(renomalisation）乘以收缩的因素x。收敛因此需要{}。
   到现在，讨论就限定到固定弹性系数。如果使用随机弹性系数{}
   弹性系数随机以放置在Pij和Pgj之间放置一个{}，[ ]产生一个{}。前面的相当于另一个坐标转换，类似的分析使得Eq.20得到保证，除了《。》可能是大于开始结构和随机数列的平均值。{}的随机更难以考虑在目前的形式内;虽然Clerc and Kennedy已经证明了{}<4时简单模型进入到循环或者是准循环的粒子轨迹。这可能会减慢种群在相互作用中或者围绕指数波动中又或者是两种情况的收缩。
3.3 带电粒子
 所有带电粒子依照Eq1里修改后的库仑式加速度相互排斥。另外，每粒子向自己的{}紧缩。假设吸引因子都在最优位置xa收敛。带电粒子子群将不会失败，因为当粒子接近xa时他们也会相互接近，从而增加颗粒间斥力的平方反比。因此希望带电粒子群的多样性将会是一个引力与斥力加速度平均平衡的均衡值。然而，带电粒子的相互用是混乱的所以很难动态预测，而且在小的时间内带电粒子群的平均值{}可能会有比较大的波动。在这里我们对带电粒子群多样性仅能做一般评介。
     我们现在考虑两个粒子，一个固定并且接近于xa=o。第二个粒子的平均位置R由{}确定，这里{}，{}在Eq1里已经给出。这里有三个可能，分别由中性粒子的弹性常量{}，静电常量{}和{}确定:
{}
{}
{}
R是M+带电粒子群粒子间空间的估计，它是一般都比平均空间小因为以上的分析都没有考虑粒子的速度而且许多个体都 可能增大R。因此这个估计可以作为|s+|的一个下界值：{}较大的波动的振幅和种群大小的平均值{}可以通过考虑每一个粒子都可能经历的最大静电加速度来估计。以上可能在下面所述的实例 中发生，M+-1个粒子都距离粒子群边缘为rc的半径内，所有的加速度都平行。最大的加速度是核心加速度的{}倍，{}确定了一个上界{}。
四、实验
 大量的实验都测试了程度部分的推测。这里列出三组实验，第一组为实验1到实验4，测试了粒子的相互作用，随机弹性系数以及粒子电荷对中性群的多样性。第二组为实验5和实验6，测量带电粒子两种不核心半径的大小。最后两个实验测试中性粒子和带电粒子在跟踪动态最优的效果。
    种群组成由（N,M+）描述，其中N（M+）分别是中性粒子（带电粒子）的数量。所有的实验都在3维空间和动态半径内进行。所有的弹性常量都设置为标准值（由Clerc and Kennedy 在2002提出），{}。标准值的限制因子是{}（Eq.8）.参数设置和实验详情都记录在表3和表4中了。所有实验包括相互作用粒子实验的目标函数f是sphere函数f=x.x。
4.1 中性粒子的多样性测试
4.1.1 实验设计
这一组实验的第一个实验是为Clerc and Kennedy 的收敛设置条件，设置20个粒子的中性粒子群和一个固定在O点的吸引因子p。实验2和3 在简单模型里引入粒子间的相互作用和随机弹性系数。第四个实验测试标准pso随粒子相互作用和随机弹性系数的变化。
   在[]上随机分布和共1000次迭代里每一次迭代后种群的大小|s|都会随种群告知。这是一种简运行模型。每一实验运行50次，实验3和4 每一次初始化不同的种群和不同的伪随机数列{}（Eq.21）。
{表3}
{表4}
4.1.2 结果与分析
图3，4，5，6显示了实验1到4每一次运行的|S(t)|。图题，给出了最佳拟合直线的方程。这些数字是50运行中的任何一个典型。表5显示了梯度（标准误差）和收敛因子平均超过所有运行时的最佳拟合直线。很明显随机弹性系数的中性粒子群的尺寸以指数方式衰减会引起更多的波动。从这些结果中得出的经验法则：|s|=kat{},
k和a常量与Eq.12和Eq.20相一致。a 与通过{}重新正规化收缩相关。
   实验1（简单模型）与Eq.12的预测十分一致;{}。实验2到4显示了当弹性系数随机化时或者粒子相互作用时又或者是两者都具备时，收敛减速了，实际上也可以说是没有收敛，{}。对于一个特定的运行，弹性随机诱导周围缩放，这有助于解释为什么随机已经被证明是有益于波动静态优化(Kennedy and Eberhart 1995)。
{表5}
一个单独的运行中随机化能够减慢收敛，但是当平均运行超过许多次时收敛与固定弹性收敛十分相似。
   结果是当粒子间相互作用和/或者随机化时，收敛因子a与收敛极值十分接近（a=1.0)，这可能解释为什么夹紧速度经常在pso中使用。例如，Eberhart and Shi (2000)推荐每一粒子的速度在速度更新后马上都夹紧。
4.2 带电粒子的多样性
4.2.1 实验设计
实验5和6测试核心半径rc=1.0和0.1的带电种群的空间尺寸（n个中子m+个带电荷Q的粒子）。在两个实验中都用一个（20，20）的种群，各自运行50次。
4.2.2 结果与分析
图，7，8，9，10显示了依迭代而绘画的带电种群尺寸。也就是标准误差和在100到1000次迭代中|s+|的最小最大值，允许带电种群的稳定性。图7和9显示了一次运行的结果。这些数字证明了带电种群不像中性种群一样不收缩了。然而带电种群的大小容易有较大的波动，而且核半径越短波动越大。图8和10显示了大于50次运行的|s+|的平均值。
{图7}
{图8}
{图9}
{图10}
{表6}
当平均时|s+|的平均值的波动会减少，而且减少在rc=1.0时达到最大。
   等式22和23提出了种群尺寸的波动的估计。表6显示了实验5和6计算这些边界的结果。为了得到{}，粒子间距离的估计R是通过依3.3节的条件1到3比较{}和rc与rp得到的。
   |S+|的观察值都在预测界线内。下界由于低估了粒子间的平均距离低估了2.4和3.6（速度和许多个体没有考虑在内）。rc=1.0的种群的上界与观察值保持了一致，但对于rc=0.1的种群的同样边界是3.2倍太大了。这是因为上界的估计对核加速度ac十分敏感，rc=0.1的种群的加速度很大（ac=100）.
   对于两个种群的选择是依多样性的范围的需要而定的。在这里，动态范围是10，rc=0.1的种群覆盖了每一维搜索空间的80%。但种群是低效的，这是因为它远离了搜索空间的边缘。
4.3 最优跟踪
 4.3.1 试验设计
试验7和8测试一个（40，0）的中性粒子群和一个（20，20+）的带电粒子群的在严格不同的环境中跟踪移动最优的能力。在每一个试验中，一个偏移向量（s,s,s）加入到每第100次迭代中sphere函数的全局最小xa中。在实验7中选择了s=0.1的偏移。这是一个温和的改变，仅仅显示了动态范围的1%。实验8中的改变更为剧烈，其中的s=5.0，也就是动态范围的50%。每一实验都将会运行50次，每一次都产生不同的随机数。类似于实验2 的一系列子实验都是为了找到（40，0）的中性粒子群的收敛因子a。
4.3.2 结果与分析
中性粒子群的收敛因子为0.94.在一个初始化大小为10的种群中，预期种群在第100次迭代时是{=0.021}。在实验7 中的最佳跳动大概是中性粒子群多样性的5倍，大概是实验8的250倍。
    这些动态实验的结果都图11，12，13，14中给出了。数据显示了运行超过50次中，|  {}|的平均值，和整个种群在第t次迭代中最好位置的殴几里德距离。
  图11，12显示了温和环境的结果。中性粒子群的最好位置在跳跃中得到优化，但是整个表现呈现出恶化。带电粒子群追踪最佳时表现更好，结果在第5跳后开始呈现稳定。图13，14显示了恶劣环境下的结果。带电粒子群在恶劣环境中表现相对来讲更好，因为它有同样的绝对误差{}。这中因为最佳跳跃总是在带电粒子群内。
五、结束语
如果PSO应用于动态问题中，那么与最佳位置的平均跳跃相比的收敛的速率的相关知识是可取的。如果种群与最佳改变没有很多多样性，那么种群将会很难重构多样性和跟踪这些改变。一个简单多样性增长机制，带电粒子间相互斥力作用，已经提出而且在一些恶劣环境中作用很好。
{图11}
   为了帮助理解为什么一个中性粒子群（经典PSO）会丢失多样性，为何带电粒子群又保持了多样性，我们提出了最大外延空间，种群尺寸|S|作为一个多样性的尺度。
{图12}
{图13}
{图14}
一些人分析了在收敛向一个球形对称的最佳条件下的刺激和标度律|s|=kat。收敛因子a与限制因子x相关，a={}，这里n=1是简单模型，否则n>1。
    标度律已经在20个粒子的粒子群和三维sphere函数的模型中证明了：一个没有相互作用的简单模型，一个有相互作用的简单模型，一个弹性系数随机化的简单模型和PSO。
  n=1的理论预测在简单模型中已经证明了。它揭示了粒子间相互作用和弹性随机系数或者是两者在一起的影响类似，也揭示了从a=0.8542到a=0.92-0.93的减慢收敛。接近于临界收敛的值揭示了pso的一般说法，夹紧速度有益。弹性系数随机化引起了在缩放比例的小的波动，也轻微地减慢了收敛。现在已经知道弹性系数随机化可以让更难目标函数收敛，预测可能是因为多样性地波动。
    同样可以预测带电粒子群不会发生碰撞，因为在中子最优位置的吸引力和带电粒子间的斥力存在平衡。对带电粒子群的多样性的分析表明种群大小|s+|的大的波动和上下界都提出了。 这些边界值的提出都是依带电粒子电荷Q和修改库仑定律的两个参数（核心半径rc,感知极限rp）得到的。
   在40个粒子其中一半带电的实验中，揭示了|s+|的波动虽然超过运行50次的平均值是平滑的。在rc=1.0时种群覆盖了整个动态范畴X，但是当rc=0.1时带电粒子更多 时候是在范围之外。尽管在两个参数下最小群尺寸相似，但是rc=0.1时种群在一些60倍X时会有较大的波动。似乎rc=1.0的带电粒子当问题在发生地X以内时更有效。计算出的上限和下限给这些波动的显著的标志。
    带电与不带电的种群都在一个简单动态最优化问题中进行了测试。正如理论图景和实践学习多样性的丢失
带电粒子群总的表现都好于不带电粒子群。带电粒子群在两种环境下跟踪位置和最佳跳跃在同样的绝对误差内，这表明其在未知多样性的环境中潜在的多功能性。
   值得注意的是对于|s|的预测没有考虑在非对称最优的领域内的情况。在这个例子中分析采用每一坐标最大空间范围可能更合适（|sj|,j=1....d）。尽管分析已经提出了|s+|的上下限并且也得到了验证，但是Q,rc,rp以及种群的数量的最佳设置在理论和实验中都没有给出 。